(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{30:function(e,t,a){},37:function(e,t,a){e.exports=a(54)},42:function(e,t,a){},51:function(e,t,a){e.exports=a.p+"static/media/movie_placeholder.d1b4253f.png"},54:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(23),o=a.n(c),i=(a(42),a(17)),s=a(5),l=a.n(s),m=a(15),u=a(10),v=a(11),p=a(13),h=a(12),d=a(14),f=a(16),g=a(6),E=(a(30),r.a.forwardRef(function(e,t){return r.a.createElement("canvas",Object.assign({},e,{ref:t}))}),function(e){return r.a.createElement("div",e,e.children)}),b=function(e){return r.a.createElement("p",e,e.children)},y=function(e){return r.a.createElement("img",Object.assign({},e,{alt:e.alt}))},k=function(e){return r.a.createElement("span",e,e.children)},N=function(e){var t="".concat(e.datatype);return r.a.createElement(t,e,e.children)},w=function(e){return r.a.createElement("ul",e,e.children)},M=function(e){return r.a.createElement("li",e,e.children)},j=function(e){return r.a.createElement("button",e,e.children)},S=function(e){return r.a.createElement("small",e,e.children)},O=function(e){return r.a.createElement("form",e,e.children)},x=function(e){return r.a.createElement("input",e)},D=a(2),_=a(3),F=Object(g.f)(function(e){return r.a.createElement(E,{className:"navbar navbar-expand-lg fixed-top"},r.a.createElement(E,{className:"container-fluid"},r.a.createElement(f.b,{className:"navbar-brand btn btn-link",to:"/"},r.a.createElement(D.a,{icon:_.d}),"\xa0MovieDB"),r.a.createElement(E,{className:"navbar-right"},r.a.createElement(f.b,{className:"nav-item btn btn-link ml-2",to:"/favourites"},r.a.createElement(D.a,{icon:_.e}),r.a.createElement(k,{className:"ml-2"},"My Favourites"),e.favs>0?r.a.createElement(k,{className:"badge badge-warning ml-2"},e.favs):""),r.a.createElement(f.b,{className:"nav-item btn btn-link ml-2",to:"/search"},r.a.createElement(D.a,{icon:_.f}),r.a.createElement(k,{className:"ml-2"},"Search")))))}),I=function(e){function t(e){var a;return Object(u.a)(this,t),(a=Object(p.a)(this,Object(h.a)(t).call(this,e))).state={title:a.props.menuItems[0].value,currentState:a.props.currentState},document.addEventListener("removeAllDropdown",function(){a.setState({currentState:!1})}),a}return Object(d.a)(t,e),Object(v.a)(t,[{key:"toggleState",value:function(){document.dispatchEvent(new Event("removeAllDropdown")),this.setState({currentState:!this.state.currentState})}},{key:"changeDropdown",value:function(e){this.props.onItemSelect(e),this.setState({title:e.value,currentState:!1})}},{key:"render",value:function(){var e=this;return r.a.createElement(E,{className:"dropdown ".concat(this.state.currentState?" show":"")},r.a.createElement(j,{className:"btn btn-secondary dropdown-toggle",onClick:function(){return e.toggleState()}},this.state.title),r.a.createElement(w,{className:"dropdown-menu-".concat(this.props.menuAlignment," dropdown-menu").concat(this.state.currentState?" show":"")},this.props.menuItems.map(function(t,a){return r.a.createElement(j,{className:"dropdown-item",key:a,onClick:function(){return e.changeDropdown(t)}},t.value)})))}}]),t}(r.a.Component),C=Object(g.f)(function(e){return r.a.createElement(E,{className:"col col-6 col-md-4 col-sm-6"},r.a.createElement(E,{className:"card",style:{backgroundImage:"url(http://image.tmdb.org/t/p/w500/".concat(e.movieData.poster_path,")")},onClick:function(){return e.history.push("/details/".concat(e.movieData.id))}},r.a.createElement(E,{className:"card-body"},r.a.createElement(E,{className:"text-right w-100"},r.a.createElement(j,{className:"btn btn-link \n          ".concat(e.favMovies.filter(function(t){return t.id===e.movieData.id}).length>0?"text-danger":"text-light"),onClick:function(t){t.stopPropagation(),e.addMovieToFav(e.movieData)}},r.a.createElement(D.a,{icon:_.e}))),r.a.createElement(E,null,r.a.createElement(N,{datatype:"h5"},e.movieData.title),r.a.createElement(b,{className:"rating-genre"},R.filter(function(t){return t.id===e.movieData.genre_ids[0]})[0].name,r.a.createElement(k,{className:"ml-2 mr-2",style:{fontSize:"0.5rem"}},r.a.createElement(D.a,{icon:_.c})),e.movieData.vote_average,r.a.createElement(k,{className:"ml-1",style:{fontSize:"0.625rem"}},r.a.createElement(D.a,{icon:_.g})))))))}),P=function(e){function t(){var e,a;Object(u.a)(this,t);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(a=Object(p.a)(this,(e=Object(h.a)(t)).call.apply(e,[this].concat(r)))).filterDropdownMenuItems=[{id:"popular",value:"Popular Movies"},{id:"top_rated",value:"Top Rated"},{id:"upcoming",value:"Upcoming"},{id:"now_playing",value:"Now Playing"}],a.state={filter:"",sorting:"",currentDropdown:"",movieList:[],pageNo:1,totalPages:1,scrolled:!1},a}return Object(d.a)(t,e),Object(v.a)(t,[{key:"componentDidMount",value:function(){var e=Object(m.a)(l.a.mark(function e(){var t;return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:this.props.isFav?this.setState({movieList:this.props.favMovies}):(t=this.filterDropdownMenuItems[0].id,this.getMovies(this.state.pageNo,t));case 1:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"getMovies",value:function(){var e=Object(m.a)(l.a.mark(function e(t,a){var n,r,c,o,s;return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(J,"/movie/").concat(a,"?api_key=").concat(q,"&page=").concat(t));case 2:return n=e.sent,e.next=5,n.json();case 5:return r=e.sent,e.next=8,r.results;case 8:c=e.sent,o=r.hasOwnProperty("total_pages")?r.total_pages:1,s=[],s=this.state.filter===a?[].concat(Object(i.a)(this.state.movieList),Object(i.a)(c)):Object(i.a)(c),this.setState({movieList:s,pageNo:t,filter:a,totalPages:o});case 13:case"end":return e.stop()}},e,this)}));return function(t,a){return e.apply(this,arguments)}}()},{key:"loadMore",value:function(){var e=this.state.pageNo+1;this.getMovies(e,this.state.filter)}},{key:"componentWillReceiveProps",value:function(e){e.isFav&&this.setState({movieList:e.favMovies})}},{key:"onItemSelect",value:function(e){console.log(e),this.getMovies(1,e.id)}},{key:"render",value:function(){var e=this;return r.a.createElement(E,{className:"container movie-list"},r.a.createElement(E,{className:"row mb-3"},r.a.createElement(E,{className:"col col-12 col-md-5 d-flex align-items-center justify-content-between"},r.a.createElement(N,{datatype:"h1",className:"m-0"},this.props.isFav?"Favourites":"Popular Movies")),this.props.isFav?"":r.a.createElement(E,{className:"col col-12 col-md-7 d-flex align-items-center justify-content-end"},r.a.createElement(I,{currentState:"Popular Movies"===this.state.currentDropdown,onItemSelect:function(t){return e.onItemSelect(t)},menuAlignment:"right",menuItems:this.filterDropdownMenuItems}))),r.a.createElement(E,{className:"row"},this.state.movieList.length>0?r.a.createElement(r.a.Fragment,null,this.state.movieList.map(function(t,a){return r.a.createElement(C,{favMovies:e.props.favMovies,movieData:t,key:a,addMovieToFav:e.props.updateFavs})}),this.props.isFav?"":r.a.createElement(E,{className:"text-center w-100 mb-3".concat(this.state.pageNo<this.state.totalPages?" d-inline-block":" d-none")},r.a.createElement(j,{className:"btn btn-warning",onClick:function(){return e.loadMore()}},"Load More"))):r.a.createElement(E,{className:"col"},r.a.createElement(b,null,this.props.isFav?"You have not added any movies here.":"Loading..."),this.props.isFav?r.a.createElement(f.b,{to:"/",className:"btn btn-primary"},"Explore"):"")))}}]),t}(r.a.Component),L=function(e){function t(){var e,a;Object(u.a)(this,t);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(a=Object(p.a)(this,(e=Object(h.a)(t)).call.apply(e,[this].concat(r)))).state={movieDetails:null,pointerMovementX:0,pointerMovementY:0,backAnim:!1},a}return Object(d.a)(t,e),Object(v.a)(t,[{key:"componentDidMount",value:function(){var e=Object(m.a)(l.a.mark(function e(){var t,a;return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return console.log(this.props.match.params.id),e.next=3,fetch("".concat(J,"/movie/").concat(this.props.match.params.id,"?api_key=").concat(q));case 3:return t=e.sent,e.next=6,t.json();case 6:a=e.sent,this.setState({movieDetails:a}),console.log(a);case 9:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"getGenres",value:function(e){return e.map(function(t,a){return r.a.createElement(k,{key:a},t.name,a<e.length-1?r.a.createElement(k,{className:"ml-2 mr-2",style:{fontSize:"0.5rem"}},r.a.createElement(D.a,{icon:_.c})):"")})}},{key:"getMovieRuntime",value:function(e){var t,a;return t=Math.floor(e/60).toString(),a=Math.abs(e%60).toString(),"".concat(t,"H").concat(a,"Min")}},{key:"handlePointerMove",value:function(e){this.setState({pointerMovementX:e.clientX,pointerMovementY:e.clientY})}},{key:"updateFavs",value:function(e){var t={vote_count:e.vote_count,id:e.id,video:e.video,vote_average:e.vote_average,title:e.title,popularity:e.popularity,poster_path:e.poster_path,original_language:e.original_language,original_title:e.original_title,genre_ids:e.genres.map(function(e){return e.id}),backdrop_path:e.backdrop_path,adult:e.adult,overview:e.overview,release_date:e.release_date};this.props.updateFavs(t)}},{key:"render",value:function(){var e=this;return this.state.movieDetails?r.a.createElement(E,{className:"container-fluid movie-details fadeUp",onPointerMove:function(t){return e.handlePointerMove(t)},style:{backgroundImage:"url(http://image.tmdb.org/t/p/w500/".concat(this.state.movieDetails.backdrop_path,")"),backgroundPosition:"".concat(Math.floor(this.state.pointerMovementX/100),"% ").concat(Math.floor(this.state.pointerMovementY/100),"%")}},r.a.createElement(j,{className:"btn btn-link fixed-top backBtn",onClick:this.props.history.goBack},r.a.createElement(D.a,{icon:_.b})),r.a.createElement(E,{className:"row"},r.a.createElement(E,{className:"container-fluid"},r.a.createElement(E,{className:"container mt-3 mb-3"},r.a.createElement(E,{className:"row"},r.a.createElement(E,{className:"col col-4"},r.a.createElement(y,{src:"http://image.tmdb.org/t/p/w500/".concat(this.state.movieDetails.poster_path),className:"img-fluid poster"}),r.a.createElement(j,{className:"btn btn-primary w-100 mt-3 mb-3",onClick:function(){return e.updateFavs(e.state.movieDetails)}},r.a.createElement(k,{className:"".concat(this.props.favMovies.filter(function(t){return t.id===e.state.movieDetails.id}).length>0?"text-danger":"text-light")},r.a.createElement(D.a,{icon:_.g})),"\xa0Make Favourite")),r.a.createElement(E,{className:"col col-8"},r.a.createElement(N,{datatype:"h1",className:"title"},this.state.movieDetails.title,r.a.createElement(k,{className:"rating"},r.a.createElement(k,{className:"text-warning"},r.a.createElement(D.a,{icon:_.g})),r.a.createElement(k,null,this.state.movieDetails.vote_average))),r.a.createElement(b,null,this.getGenres(this.state.movieDetails.genres),this.state.movieDetails.runtime&&this.state.movieDetails.runtime>0?r.a.createElement(r.a.Fragment,null,r.a.createElement(k,{className:"ml-2 mr-2",style:{fontSize:"0.5rem"}},r.a.createElement(D.a,{icon:_.c})),r.a.createElement(k,null,this.getMovieRuntime(this.state.movieDetails.runtime))):""),r.a.createElement(E,{className:"text-uppercase"},this.state.movieDetails.spoken_languages.map(function(e,t){return r.a.createElement(k,{title:e.name,key:t,className:"badge badge-dark mr-2"},e.iso_639_1,"\xa0")})),r.a.createElement(N,{datatype:"h4",className:"mt-3"},"Introduction"),r.a.createElement(b,null,this.state.movieDetails.overview))))))):r.a.createElement(E,{className:"container m-3"},"Loading details...")}}]),t}(r.a.Component),A=Object(g.f)(L),z=a(57),B=a(56),T=function(e){function t(e){var a;return Object(u.a)(this,t),(a=Object(p.a)(this,Object(h.a)(t).call(this,e))).state={query:"",results:[]},a}return Object(d.a)(t,e),Object(v.a)(t,[{key:"handleChange",value:function(){var e=Object(m.a)(l.a.mark(function e(t){var a,n;return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!((a=t.target.value).length>2)){e.next=6;break}return e.next=4,this.searchQuery(a);case 4:n=e.sent,this.setState({results:n});case 6:this.setState({query:a});case 7:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"searchQuery",value:function(){var e=Object(m.a)(l.a.mark(function e(t){var a,n;return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(J,"/search/movie?api_key=").concat(q,"&query=").concat(t));case 2:return a=e.sent,e.next=5,a.json();case 5:return n=e.sent,console.log(n),e.abrupt("return",n.results);case 8:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this;return r.a.createElement(E,{className:"container-fluid searchPage"},r.a.createElement(E,{className:"container"},r.a.createElement(O,null,r.a.createElement(E,{className:"input-group input-group-lg"},r.a.createElement(x,{type:"text",placeholder:"Search movies here",className:"form-control border-0",onChange:function(t){return e.handleChange(t)},value:this.state.query}),r.a.createElement(k,{className:"input-group-append"},r.a.createElement(j,{className:"btn btn-light border-0"},r.a.createElement(D.a,{icon:_.f}))))),this.state.results.length>0?r.a.createElement(w,{className:"list-group mt-3 mb-3"},this.state.results.map(function(t,n){return r.a.createElement(M,{className:"list-group-item text-dark",key:n,onClick:function(){return e.props.history.push("/details/".concat(t.id))}},r.a.createElement(y,{src:t.poster_path?"http://image.tmdb.org/t/p/w200/".concat(t.poster_path):a(51)}),r.a.createElement(E,{className:"details"},r.a.createElement(N,{datatype:"h4"},t.title),r.a.createElement(k,null,r.a.createElement(k,null,R.filter(function(e){return e.id===t.genre_ids[0]})[0]&&R.filter(function(e){return e.id===t.genre_ids[0]})[0].name),r.a.createElement(k,{className:"ml-2 mr-2",style:{fontSize:"0.5rem"}},r.a.createElement(D.a,{icon:_.c})),t.vote_average,r.a.createElement(k,{className:"ml-1",style:{fontSize:"0.625rem"}},r.a.createElement(D.a,{icon:_.g}))),r.a.createElement(b,null,r.a.createElement(S,null,t.overview.slice(0,97)+"..."))))})):""))}}]),t}(r.a.Component),Y=Object(g.f)(T),q="f041ac01899ba8cce1bda2c8f62a1965",J="https://api.themoviedb.org/3",R=[],X=function(e){function t(){var e,a;Object(u.a)(this,t);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(a=Object(p.a)(this,(e=Object(h.a)(t)).call.apply(e,[this].concat(r)))).state={currentMovieId:-1,favMovies:[],scrollPos:0,scrolled:!1},a.getMovieDetails=function(e){a.setState({currentMovieId:e})},a}return Object(d.a)(t,e),Object(v.a)(t,[{key:"componentDidMount",value:function(){var e=Object(m.a)(l.a.mark(function e(){var t,a,n,r,c=this;return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(J,"/genre/movie/list?api_key=").concat(q,"&language=en-US"));case 2:return t=e.sent,e.next=5,t.json();case 5:a=e.sent,R=a.genres,window.addEventListener("scroll",function(e){var t=e.target.scrollingElement.scrollTop>=100;t!==c.state.scrolled&&(c.setState({scrolled:t}),console.log(t))}),(n=localStorage.getItem("favMovies"))&&"object"===typeof(r=JSON.parse(n))&&r.length>0&&this.setState({favMovies:r});case 10:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"scrollTop",value:function(){document.querySelector("html").scrollIntoView({behavior:"smooth"})}},{key:"goBack",value:function(){this.setState({currentMovieId:-1})}},{key:"updateFavs",value:function(e){var t=this.state.favMovies;if(t.filter(function(t){return t.id===e.id}).length>0){var a=t.filter(function(t){return t.id!==e.id});this.setState({favMovies:Object(i.a)(a)}),localStorage.setItem("favMovies",JSON.stringify(a))}else{var n=[].concat(Object(i.a)(this.state.favMovies),[e]);this.setState({favMovies:Object(i.a)(n)}),localStorage.setItem("favMovies",JSON.stringify(n))}}},{key:"render",value:function(){var e=this;return r.a.createElement(E,{className:"App",style:{overflowY:this.state.currentMovieId>=0?"hidden":"auto"}},r.a.createElement(j,{className:"btn btn-link text-light btn-lg fixed-bottom".concat(this.state.scrolled?" d-inline-block":" d-none"),onClick:function(){return e.scrollTop()}},r.a.createElement(D.a,{icon:_.a})),r.a.createElement(f.a,{basename:"./"},r.a.createElement(g.a,{render:function(t){var a=t.location;return r.a.createElement(r.a.Fragment,null,r.a.createElement(F,{favs:e.state.favMovies.length}),r.a.createElement(z.a,null,r.a.createElement(B.a,{key:a.key,classNames:{appear:"d-none",enter:"",exit:"fadeDown"},timeout:{exit:550}},r.a.createElement(g.c,{location:a},r.a.createElement(g.a,{exact:!0,path:"/",render:function(){return r.a.createElement(P,{favMovies:e.state.favMovies,isFav:!1,updateFavs:function(t){return e.updateFavs(t)}})}}),r.a.createElement(g.a,{path:"/favourites",render:function(){return r.a.createElement(P,{favMovies:e.state.favMovies,isFav:!0,updateFavs:function(t){return e.updateFavs(t)}})}}),r.a.createElement(g.a,{path:"/details/:id",render:function(){return r.a.createElement(A,{favMovies:e.state.favMovies,updateFavs:function(t){return e.updateFavs(t)}})}}),r.a.createElement(g.a,{path:"/search",component:Y})))))}})))}}]),t}(r.a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(r.a.createElement(X,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[37,1,2]]]);
//# sourceMappingURL=main.a3a20172.chunk.js.map